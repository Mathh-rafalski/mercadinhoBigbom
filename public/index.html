<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <link href="css/simple-sidebar.css" rel="stylesheet">
    <style>
        body {
            background-color: black
        }

        #grad1 {
            height: 648px;
            ;
            background-color: red;
            /* For browsers that do not support gradients */
            background-image: linear-gradient(#4c9de2, #d6dde4);
            /* Standard syntax (must be last) */
        }

        .tarefa {
            background: blue;
            width: 15%;
            height: 250px;
            align-items: center;
            margin-top: 15%;
            background-image: linear-gradient(#4c9de2, #d6dde4);
            background: black;
        }

        .form {
            text-align: center;
            padding-top: 5%;
        }

        .lbl {
            font-size: 26px;
            margin-top: 2px;
            font-weight: bold;
            color: white;
        }

        .salvar {
            margin-top: 3%;
            float: right;
        }

        .butao {
            border-radius: 10px;
            font-weight: bold;
            display: inline-block;
            text-align: center;
            transition: all 0.4s;
            cursor: pointer;
            margin-top: 5%;
        }
        .butao:hover {
            border-color: black;
            color:white;
            background-color: #4c9de2
        }
        .msg {
            text-align: center;
            height: 50px;
            width: 20%;
            margin-top: 2%;
            margin-left: 46.5%;
            font-size: 24px;
            visibility: hidden;
            font-weight: bold;
        }

        .inp {
            margin-top: 1%;
        }
    </style>
</head>

<body id="grad1">
    <div class="tarefa container clearfix">
        <form class="form" id="formulario" autocomplete="off">
            <label class='lbl'>Login</label>
            <input type="text" class='inp form-control' id="user" name="fname" placeholder='Usuário'><br>
            <input type="password" class='inp form-control' id="senha" name="lname" placeholder='Senha'><br>
            <button type="button" onclick="enviar()" class="btn btn-light salvar btn-sm butao">Login</button>
        </form>
    </div>
    <div id="snackbar" class='snackbar'></span id='save'>Erro no usuário ou senha</span></div>
    <div id="inserido" class='snackbar'><span id='err'>Erro no login</span></div>
</body>
<script>
    function enviar() {
        let user = document.getElementById('user').value
        let senha = document.getElementById('senha').value
        var boolean = true
        fetch('/logar', {
            method: 'get',
            headers: {
                'Content-Type': 'application/json'
            },
        }).then(response => response.json())


        
        
            .then(data => {
                console.log(data);
                
                data.forEach(element => {
                    if (element.nome == user && element.senha == senha) {
                        console.log('alo');
                        window.location.href = '/home'
                    } else {
                        boolean = false;
                    }
                });
                if (boolean == false) {
                    var x = document.getElementById("snackbar");
                    x.className = "show";
                    setTimeout(function () { x.className = x.className.replace("show", ""); }, 3000);
                }
            })

    }
</script>

</html>